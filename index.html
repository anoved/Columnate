<html>
<head>
    <title>Columnate</title>

    <script type="text/javascript" src="uglifyjs.js"></script>
    <script type="text/javascript" src="columnate.js"></script>

    <script>
        
        function CreateLink() {

            // cribbed from bookmarkletify
            var toplevel_ast = UglifyJS.parse(Columnate.toString() + "Columnate();");
            toplevel_ast.figure_out_scope();
            var compressor = UglifyJS.Compressor();
            var compressed_ast = toplevel_ast.transform(compressor);
            compressed_ast.figure_out_scope();

            var url = "javascript: (function () {" + compressed_ast.print_to_string() + "}())";
            document.getElementById("bookmarkletLink").href = url;

            // do something to update the link style once ready
        };

        function ClickHelp() {
            alert("Drag this link to your bookmark bar.");
            return false;
        };
    </script>

</head>
<body onload="CreateLink();">

<h1>Columnate</h1>

<p>Drag this link to your bookmarks bar to install:</p>

<p><strong><a href="#" id="bookmarkletLink" onclick="return ClickHelp();">Columnate</a></strong></p>

<p>Now find a web page with a long article. Click the <strong>Columnate</strong> bookmarklet to reformat the page free of distractions. The article will be formatted in narrow columns like a newspaper.</p>

<p>Visit the <a href="https://github.com/anoved/Columnate">Columnate project page</a> for more information or to report <a href="https://github.com/anoved/Columnate/issues">issues</a>.</p>

</body>
</html>

